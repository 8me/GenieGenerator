<?xml version="1.0" encoding="ISO-8859-1"?>

<!--
Configuration for the NHLPrimaryVtxGenerator EventRecordVisitorI

Algorithm Configurable Parameters:
..............................................................................................................................
Name                      Type        Opt   Comment                                           Default
..............................................................................................................................

*******************                         **********************************
set ParameterSpace:                         Choice of parameter space position
*******************                         **********************************
NHL-Mass                  double      no
NHL-LeptonMixing          vec-double  no    Mixing to charged leptons: e-mu-tau
NHL-Ue42
NHL-Um42
NHL-Ut42                  double      no    Same as NHL-LeptonMixing. Needed by flux routines.
NHL-Majorana              bool        no    Majorana vs Dirac NHL
NHL-Type                  int         no    [Only relevant for Dirac && hist flux generation]:
                                            0 ==> pure particle beam
                                            1 ==> pure antiparticle beam
                                            2 ==> mix of the two

************************                    *****************************************
set InterestingChannels:                    Which decays to un-inhibit
                                            Each decay set to true is added to vector
************************                    *****************************************
NHL-2B_mu_pi              bool        no    N -> mu + pi
NHL-2B_e_pi               bool        no    N -> e  + pi
NHL-2B_nu_pi0             bool        no    N -> nu + pi0
NHL-3B_nu_nu_nu           bool        no    N -> nu + nu  + nu
NHL-3B_nu_mu_mu           bool        no    N -> nu + mu  + mu
NHL-3B_nu_mu_e            bool        no    N -> nu + mu  + e
NHL-3B_nu_e_e             bool        no    N -> nu + e   + e
NHL-3B_e_pi_pi0           bool        no    N -> e  + pi  + pi0
NHL-3B_mu_pi_pi0          bool        no    N -> mu + pi  + pi0
NHL-3B_nu_pi0_pi0         bool        no    N -> nu + pi0 + pi0

**********************                      *******************************
set InitialState:                           Modify incoming NHL phase-space
**********************                      *******************************
NHL-angular_deviation     double      no    [Only relevant for hist flux generation]
                                            Gaussian spread of NHL 3-momentum off-beam-axis
NHL-max-energy            double      no    Cutoff energy for flux spectrum

********************                        ********************************
set CoordinateXForm:                        Define beam -> local coord xform
********************                        ********************************
Beam2User_T               vec-double  no    Beam origin -> user origin translation [m]             
DetCentreXInBeam          
DetCentreYInBeam
DetCentreZInBeam          double      no    (-1) * components of Beam2User_T, i.e. detector centre
                                            position in beam frame

DetCentre_User            vec-double  no    User origin -> detector centre translation [m]
                                            Important if the input ROOT geometry is not centred at the
                                            detector centre

Beam2User_R               vec-double  no    Euler angles about beam axes [rad]                
                                            These are *extrinsic* rotations about x-z-x
					    Describe rotation: target-hall (x,y,z) ==> beam (X,Y,Z)
EulerExtrinsicX1
EulerExtrinsicZ
EulerExtrinsicX2          double      no    Same as components of Beam2User_R.

Beam2Det_R                vec-double  no    Same as Beam2User_R, but describe
                                            rotation: target-hall (x,y,z) ==> detector (X,Y,Z)

****************                            ******************************************
set ParticleGun:                            Define NHL trajectory for Particle Gun app
****************                            ******************************************
PG-OriginX
PG-OriginY
PG-OriginZ                double      no    Origin of the NHL trajectory in user coordinates [m]

PG-cx
PG-cy
PG-cz                     double      no    Directional cosines of the NHL momentum in user coordinates

*************                               ***************************************
set FluxCalc:                               Specific hooks for NHL flux calculation
*************                               ***************************************
ParentPOTScalings         bool        no    Ratio of all POT in flux files / POT making parent
                                            species. Calculated based on NuMI flux in MINERvA
					    ME era. Will differ for other experiments!
CalcKaonFluxOnly          bool        yes   Focus only on kaon parents in dk2nu               false
AttemptCharmCalculation   bool        yes   Predict charm-parent (D,Ds...) contribution       false
IsNHLOnAxis               bool        yes   Incoming NHL placed on SM-nu beam axis            true
UseBeamMomentum           bool        yes   Corrects near detectors: z(det) || z(tgt)         true
NHL-PolDir                vec-double  yes   Set NHL beam polarisation direction               (0,0,1)
                                            (beam coordinates!)

**********                                  *******************************************
set Hooks:                                  Switches for various calculations / effects
**********                                  *******************************************
UseRhos                   bool        yes   Use published decay widths from Coloma et al for  false
                                            3-body FS with pi0.
					    Default is Mathematica FeynArts+FeynCalc width
IncludePolarisation       bool        yes   Include NHL polarisation effects 
WeightEventsUsingGeometry bool        yes   Apply weight = P(survival) * P(decay)             true
SampleDecayVtxFirst       bool        yes   Determine prod vtx based on sampled decay vtx     false
IncludeMultipleNHL        bool        yes   Allow 2 quasi-degenerate NHL                      false


***************                             ************************************
set Validation:                             Extra options for validation scripts
***************                             ************************************


*************                               ***************************************
set External:                               Physics data needed for BR calculations
*************                               ***************************************
PMNS-U\alphaj             double      no    PMNS matrix elements
Pion-FFactor              double      no    See Coloma et al, EPJ C 81 (2021) 78
-->

<alg_conf>
  
  <param_set name="Default">
    
    <param type="string" name="CommonNHL"> ParameterSpace,InterestingChannels,InitialState,CoordinateXForm,FluxCalc,External </param>
    <param type="string" name="CommonParam"> WeakInt,CKM </param>

  </param_set>

</alg_conf>
